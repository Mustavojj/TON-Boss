<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TON BOSS - Earn TON</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    
    <div id="notification" style="display: none;"></div>

    <div id="modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Add Task</h3>
                <button id="close-modal" class="btn btn-secondary">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
            
                <div class="tabs">
                    <div class="tab active" data-tab="add-task">Add Task</div>
                    <div class="tab" data-tab="my-tasks">My Tasks</div>
                </div>

              
                <div id="add-task-tab" class="tab-content active">
                    <div class="form-group">
                        <label class="form-label">Task name *</label>
                        <input type="text" id="task-name" class="form-input" placeholder="Enter your task name">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Task link *</label>
                        <input type="url" id="task-link" class="form-input" placeholder="Enter your task link">
                    </div>

                    <div class="form-group">
                        <label class="form-label">Task type</label>
                        <div class="radio-group">
                            <div class="radio-option task-type-option" data-type="channel">
                                <i class="fab fa-telegram"></i>
                                <div>Channel/Group</div>
                            </div>
                            <div class="radio-option task-type-option" data-type="miniapp">
                                <i class="fas fa-robot"></i>
                                <div>MiniApp/Bot</div>
                            </div>
                        </div>
                        <div style="margin-top: 8px;">
                            <div class="radio-option task-type-option" data-type="other" style="grid-column: 1 / -1;">
                                <i class="fas fa-link"></i>
                                <div>Other</div>
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Total members</label>
                        <div class="radio-group">
                            <div class="radio-option members-option" data-members="500">
                                <div>500</div>
                                <small>members</small>
                            </div>
                            <div class="radio-option members-option" data-members="1000">
                                <div>1,000</div>
                                <small>members</small>
                            </div>
                        </div>
                        <div style="margin-top: 8px;">
                            <div class="radio-group">
                                <div class="radio-option members-option" data-members="5000">
                                    <div>5,000</div>
                                    <small>members</small>
                                </div>
                                <div class="radio-option members-option" data-members="10000">
                                    <div>10,000</div>
                                    <small>members</small>
                                </div>
                            </div>
                        </div>
                        <div style="margin-top: 10px; text-align: center; color: var(--text-secondary);">
                            <small>Cost: <span id="task-cost">â‰ˆ 0 TON</span> per 1,000 members (1 TON)</small>
                        </div>
                    </div>

                    <button id="confirm-task-btn" class="btn" disabled style="width: 100%; margin-top: 20px;">
                        <i class="fas fa-check"></i> Confirm
                    </button>
                </div>

                
                <div id="my-tasks-tab" class="tab-content">
                    <div id="user-tasks-container">
                        <div class="loading">
                            <div class="spinner"></div>
                            <p>Loading your tasks...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <div id="app">
        
        <header class="app-header">
            <div class="user-info">
                <img id="user-avatar" class="user-avatar" src="https://via.placeholder.com/40" alt="User">
                <div class="user-details">
                    <h2 id="user-name">Loading...</h2>
                    <span id="user-telegram-id">ID: ...</span>
                </div>
            </div>
            <div class="balance-display">
                <div class="balance-card">
                    <span class="balance-amount" id="header-ton-balance">0.000</span>
                    <small>TON</small>
                </div>
            </div>
        </header>

        
        <main>
          
            <div id="home-page" class="page active">
                <div class="glass-card">
                    <div class="section-header">
                        <div class="section-icon">
                            <i class="fas fa-play-circle"></i>
                        </div>
                        <h3>Watch & Earn</h3>
                    </div>
                    <div class="ad-task-card">
                        <div class="task-header">
                            <div>
                                <div class="task-title">WATCH ADS & EARN</div>
                                <div class="task-stats">Earn 10 GOLD per ad</div>
                            </div>
                        </div>
                        <button id="watch-ad-btn" class="btn" style="width: 100%; margin-top: 15px;">
                            <i class="fas fa-play"></i> Watch Ad & Earn
                        </button>
                    </div>
                </div>

                
                <div class="stats-grid">
                    <div class="stat-card">
                        <h3>Today ADS</h3>
                        <p id="daily-ads-watched">0/50</p>
                    </div>
                    <div class="stat-card">
                        <h3>Total ADS</h3>
                        <p id="total-ads-watched">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Referrals</h3>
                        <p id="referral-count">0</p>
                    </div>
                    <div class="stat-card">
                        <h3>Earnings</h3>
                        <p id="total-earned">0</p>
                    </div>
                </div>

                
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                    <h3>Quick Actions</h3>
                </div>
                
                <div class="glass-card">
                    <button id="add-task-btn" class="btn" style="width: 100%; margin-bottom: 10px;">
                        <i class="fas fa-plus"></i> Add New Task
                    </button>
                    <button class="btn btn-secondary" style="width: 100%;" onclick="app.switchPage('tasks-page')">
                        <i class="fas fa-tasks"></i> Browse Tasks
                    </button>
                </div>
            </div>

            
            <div id="tasks-page" class="page">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-tasks"></i>
                    </div>
                    <h3>Available Tasks</h3>
                </div>
                <div id="tasks-container">
                    <div class="loading">
                        <div class="spinner"></div>
                        <p>Loading tasks...</p>
                    </div>
                </div>
            </div>

          
            <div id="exchange-page" class="page">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-exchange-alt"></i>
                    </div>
                    <h3>Exchange Center</h3>
                </div>

                <div class="glass-card">
                    <div class="form-group">
                        <label class="form-label">From (GOLD)</label>
                        <input type="number" id="tub-amount" class="form-input" placeholder="0" value="0" min="0">
                        <small style="color: var(--text-secondary); margin-top: 5px; display: block;">
                            Available: <span id="available-tub">0</span> GOLD
                        </small>
                    </div>

                    <div class="form-group">
                        <label class="form-label">To (TON)</label>
                        <input type="number" id="ton-amount" class="form-input" placeholder="0" value="0" readonly>
                        <small style="color: var(--text-secondary); margin-top: 5px; display: block;">
                            Rate: 10,000 GOLD = 1 TON
                        </small>
                    </div>

                    <button id="convert-btn" class="btn" style="width: 100%;">
                        <i class="fas fa-sync-alt"></i> Exchange Now
                    </button>
                </div>
            </div>

            
            <div id="referrals-page" class="page">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-users"></i>
                    </div>
                    <h3>Referral Program</h3>
                </div>

                <div class="glass-card">
                    <div class="stats-grid">
                        <div class="stat-card">
                            <h3>Total Referrals</h3>
                            <p id="total-referrals">0</p>
                        </div>
                        <div class="stat-card">
                            <h3>Referral Earnings</h3>
                            <p id="referral-earnings">0</p>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">Your Referral Link</label>
                        <div style="display: flex; gap: 10px;">
                            <input type="text" id="referral-link" class="form-input" readonly value="Loading...">
                            <button class="btn" onclick="app.copyReferralLink()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </Referral          
            <div id="withdraw-page" class="page">
                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <h3>Withdraw TON</h3>
                </div>

                <div class="glass-card">
                    <form id="withdraw-form">
                        <div class="form-group">
                            <label class="form-label">TON Wallet Address</label>
                            <input type="text" class="form-input" placeholder="Enter your TON wallet" required>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Amount (TON)</label>
                            <input type="number" step="0.001" class="form-input" placeholder="0.000" min="0.1" required>
                            <small style="color: var(--text-secondary); margin-top: 5px; display: block;">
                                Minimum: 0.1 TON | Available: <span id="available-ton">0.000</span> TON
                            </small>
                        </div>
                        <button type="submit" class="btn" style="width: 100%;">
                            <i class="fas fa-paper-plane"></i> Withdraw
                        </button>
                    </form>
                </div>

                <div class="section-header">
                    <div class="section-icon">
                        <i class="fas fa-history"></i>
                    </div>
                    <h3>Withdrawal History</h3>
                </div>
                <div id="withdrawal-history">
                    <div class="loading">No withdrawal history</div>
                </div>
            </div>
        </main>

        
        <nav class="bottom-nav">
            <button class="nav-btn active" data-page="home-page">
                <i class="fas fa-home"></i>
                <span>Home</span>
            </button>
            <button class="nav-btn" data-page="tasks-page">
                <i class="fas fa-tasks"></i>
                <span>Tasks</span>
            </button>
            <button class="nav-btn" data-page="exchange-page">
                <i class="fas fa-exchange-alt"></i>
                <span>Exchange</span>
            </button>
            <button class="nav-btn" data-page="referrals-page">
                <i class="fas fa-users"></i>
                <span>Referrals</span>
            </button>
            <button class="nav-btn" data-page="withdraw-page">
                <i class="fas fa-wallet"></i>
                <span>Withdraw</span>
            </button>
        </nav>
    </div>

    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script type="module" src="config.js"></script>
    <script type="module" src="js/supabase.js"></script>
    <script type="module" src="js/security.js"></script>
    <script type="module" src="js/app.js"></script>
</body>
</html>
